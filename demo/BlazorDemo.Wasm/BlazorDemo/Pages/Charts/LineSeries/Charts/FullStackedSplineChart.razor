@*BeginHide*@
@namespace BlazorDemo
@*EndHide*@

@inject ISalesInfoDataProvider Sales

<DxChart Data="@ChartsData" CssClass="w-100">
    <DxChartFullStackedSplineSeries Name="2017"
                                    T="SaleInfo"
                                    TArgument="string"
                                    TValue="int"
                                    ArgumentField="si => si.City"
                                    ValueField="si => si.Amount"
                                    SummaryMethod="Enumerable.Sum"
                                    Filter="si => si.Date.Year == 2017" />
    <DxChartFullStackedSplineSeries Name="2018"
                                    T="SaleInfo"
                                    TArgument="string"
                                    TValue="int"
                                    ArgumentField="si => si.City"
                                    ValueField="si => si.Amount"
                                    SummaryMethod="Enumerable.Sum"
                                    Filter="si => si.Date.Year == 2018" />
    <DxChartFullStackedSplineSeries Name="2019"
                                    T="SaleInfo"
                                    TArgument="string"
                                    TValue="int"
                                    ArgumentField="si => si.City"
                                    ValueField="si => si.Amount"
                                    SummaryMethod="Enumerable.Sum"
                                    Filter="si => si.Date.Year == 2019" />
    <DxChartLegend Position="RelativePosition.Outside"
                   HorizontalAlignment="HorizontalAlignment.Right" />
</DxChart>

@code {
    IEnumerable<SaleInfo> ChartsData;

    protected override async Task OnInitializedAsync() {
        ChartsData = await Sales.GetSalesAsync();
    }
}
