@using System.Drawing

<DemoPageSectionComponent Id="Charts-SeriesCustomization-SeriesPoint">
    <ChildContentWithParameters Context="Params">
        @inject WeatherForecastService ForecastService

        <DxChart Data="@WeatherForecasts"
                 @key="Params.ThemeName"
                 CustomizeSeriesPoint="@PreparePointColor"
                 CssClass="w-100">

            <DxChartLineSeries SummaryMethod="@(i => (int)i.Average())"
                               Color="@System.Drawing.Color.Gray"
                               ValueField="@((WeatherForecast i) => i.TemperatureF)"
                               ArgumentField="@(i => i.Date.Date)"
                               Name="Temperature, F">
                <DxChartSeriesPoint Symbol="ChartPointSymbol.Polygon"
                                    Color="@System.Drawing.Color.Gray"
                                    Size="25" />
            </DxChartLineSeries>

            <DxChartLegend Position="RelativePosition.Outside" />

        </DxChart>
    </ChildContentWithParameters>


    @code {
        WeatherForecast[] WeatherForecasts;

        protected override async Task OnInitializedAsync() {
            WeatherForecasts = await ForecastService.GetDetailedForecastAsync();
        }

        protected void PreparePointColor(ChartSeriesPointCustomizationSettings pointSettings) {
            double value = (double)pointSettings.Point.Value;
            if(value > 75)
                pointSettings.PointAppearance.Color = Color.Red;
            else if(value < 25)
                pointSettings.PointAppearance.Color = Color.Blue;
        }
    }
</DemoPageSectionComponent>
